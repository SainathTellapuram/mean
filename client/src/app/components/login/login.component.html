<h1 class="page-header">Login</h1>

<div class="row show-hide-message">
    <div [ngClass]="messageClass">
        {{message}}
    </div>
</div>

<form [formGroup] = "form" (submit)="onLoginSubmit()">
    <div class="form-group"><label for="username">Username</label>
        <div [ngClass]="{'has-error':(form.controls.username.errors && form.controls.username.dirty)||(!usernameValid && form.controls.username.dirty),'has-success':!form.controls.username.errors && usernameValid}">
            <input type="text" name="username" class="form-control" autocomplete="off" placeholder="*Username" formControlName='username' (blur) = "checkUsername()"/>
            <ul class="help-block">
                <li *ngIf="form.controls.username.errors?.required && form.controls.username.dirty">This field is required</li>>
                <li *ngIf="usernameMessage">{{usernameMessage}}</li>
            </ul>
        </div>
    </div>
    
   <div class="form-group"><label for="password">Password</label>
        <div [ngClass]="{'has-error':(form.controls.password.errors && form.controls.password.dirty),'has-success':!form.controls.password.errors}">
            <input type="password" name="password" class="form-control" autocomplete="off" placeholder="*Password" formControlName='password'/>
            <ul class="help-block">
                <li *ngIf="form.controls.password.errors?.required && form.controls.password.dirty">This field is required</li>
                <li *ngIf="form.controls.password.errors?.minlength || form.controls.password.errors?.maxlength">Minimum characters : 8 , Maximum characters :35</li>
                <li *ngIf="form.controls.password.errors?.validatePassword && form.controls.password.dirty">Must have at least one uppercase, lowercase, special character, and number</li>
            </ul>
        </div>
    </div>

    <input [disabled]="!form.valid || processing" type="submit" class="btn btn-primary" value="Login"/>
</form>