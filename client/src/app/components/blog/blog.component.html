<h1 class="page-header">Clients Details</h1>
<!-- Custom Success/Error Message -->
<div class="row show-hide-message" *ngIf="message && newPost">
   <div [ngClass]="messageClass">
     {{ message }}
   </div>
 </div>
<button type="button" name='button' class="btn btn-warning" *ngIf="!newPost" (click)="newBlogForm()">New Client</button>
<button [disabled]="loadingBlogs" type="button" name='button' class="btn btn-secondary" *ngIf="!newPost" (click)="reloadBlogs()"><i class="fa fa-refresh"></i>&nbsp;&nbsp;Reload</button>
<!-- <button [disabled]="loadingBlogs" type="button" name='button' class="btn btn-secondary" *ngIf="!newPost" (click)="reloadBlogs()"><i class="fa fa-refresh fa-spin"></i>&nbsp;&nbsp;Reload</button> -->
<br/>
<br/>
<!-- form -->
<form [formGroup]="form" name="blogForm" (submit)="onClientSubmit()" *ngIf="newPost">
   <!-- First Name -->
   <div class="form-group">
      <label for="Firstname">First Name</label>
      <div [ngClass]="{'has-success': form.controls.firstname.valid, 'has-error': form.controls.firstname.dirty && form.controls.firstname.errors}">
        <input type="text" name="firstname" class="form-control" placeholder="Enter Firstname" autocomplete="off" formControlName="firstname" />
        <ul class="help-block">
          <li *ngIf="form.controls.firstname.dirty && form.controls.firstname.errors?.required">This field is required.</li>
          <li *ngIf="(form.controls.firstname.dirty && form.controls.firstname.errors?.minlength) || (form.controls.firstname.dirty && form.controls.firstname.errors?.maxlength)">Max length: 50, Min length: 5</li>
        </ul>
      </div>
    </div>
    <!-- Email  -->
    <div class="form-group">
      <label for="Email">E-Mail</label>
      <div [ngClass]="{'has-success': form.controls.email.valid, 'has-error': form.controls.email.dirty && form.controls.email.errors && form.controls.email.errors?.pattern}">
        <input type="email" name="email" class="form-control" placeholder="Enter email" autocomplete="off" formControlName="email" />
        <ul class="help-block">
          <li *ngIf="form.controls.email.dirty && form.controls.email.errors?.required">This field is required.</li>
          <li *ngIf="(form.controls.email.dirty && form.controls.email.errors?.minlength) || (form.controls.email.dirty && form.controls.email.errors?.maxlength)">Max length: 50, Min length: 5</li>
         </ul>
      </div>
    </div>
    <!-- Mobile  -->
    <div class="form-group">
      <label for="mobile">Mobile </label>
      <div [ngClass]="{'has-success': form.controls.mobile.valid, 'has-error': form.controls.mobile.dirty && form.controls.mobile.errors && form.controls.mobile.errors?.pattern}">
        <input type="mobile" name="mobile" class="form-control" placeholder="XXX - XXX - XXXX" autocomplete="off" formControlName="mobile" />
        <ul class="help-block">
          <li *ngIf="form.controls.mobile.dirty && form.controls.mobile.errors?.required">This field is required.</li>
          <li *ngIf="(form.controls.mobile.dirty && form.controls.mobile.errors?.minlength) || (form.controls.mobile.dirty && form.controls.email.errors?.maxlength)">Only 10 Digits</li>
         </ul>
      </div>
    </div>
    <!-- Qualification  -->
       <div class="form-group">
         <label for="qualification">Qualification</label>
         <div [ngClass]="{'has-success': form.controls.qualification.valid, 'has-error': form.controls.qualification.dirty && form.controls.qualification.errors && form.controls.qualification.errors?.pattern}">
         <input type="text" name="qualification" class="form-control" placeholder="Enter Qualification"  autocomplete="off" formControlName="qualification">
         <ul class="help-block">
            <li *ngIf="form.controls.qualification.dirty && form.controls.qualification.errors?.required">This field is required.</li>
            <li *ngIf="(form.controls.qualification.dirty && form.controls.qualification.errors?.minlength) || (form.controls.qualification.dirty && form.controls.qualification.errors?.maxlength)">Max length: 8, Min length: 3</li>
           </ul>
          </div>
       </div>
      <!-- Address  -->
      <div class="form-group">
         <label for="address">Address</label>
         <div [ngClass]="{'has-success': form.controls.address.valid, 'has-error': form.controls.address.dirty && form.controls.address.errors && form.controls.address.errors?.pattern}">
         <input type="text" name="address" class="form-control" placeholder="Enter Address"  autocomplete="off" formControlName="address">
         <ul class="help-block">
            <li *ngIf="form.controls.address.dirty && form.controls.address.errors?.required">This field is required.</li>
            <li *ngIf="(form.controls.address.dirty && form.controls.address.errors?.minlength) || (form.controls.address.dirty && form.controls.address.errors?.maxlength)">Max length: 60, Min length: 20</li>
           </ul>
          </div>
       </div>
       <!-- Plan  -->
       <div class="form-group">
         <label for="plan">Plan</label>
         <div [ngClass]="{'has-success': form.controls.plan.valid, 'has-error': form.controls.plan.dirty && form.controls.plan.errors && form.controls.plan.errors?.pattern}">
         <input type="text" name="plan" class="form-control" placeholder="Enter Plan"  autocomplete="off" formControlName="plan">
         <ul class="help-block">
            <li *ngIf="form.controls.plan.dirty && form.controls.plan.errors?.required">This field is required.</li>
            <li *ngIf="(form.controls.plan.dirty && form.controls.plan.errors?.minlength) || (form.controls.plan.dirty && form.controls.plan.errors?.maxlength)">Max length: 10, Min length: 5</li>
           </ul>
          </div>
       </div>
       <!-- Course -->
       <div class="form-group">
         <label for="course">Course</label>
         <div [ngClass]="{'has-success': form.controls.course.valid, 'has-error': form.controls.course.dirty && form.controls.course.errors && form.controls.course.errors?.pattern}">
         <input type="text" name="course" class="form-control" placeholder="Enter course"  autocomplete="off" formControlName="course">
         <ul class="help-block">
            <li *ngIf="form.controls.course.dirty && form.controls.course.errors?.required">This field is required.</li>
            <li *ngIf="(form.controls.course.dirty && form.controls.course.errors?.minlength) || (form.controls.course.dirty && form.controls.course.errors?.maxlength)">Max length: 14, Min length: 5</li>
           </ul>
          </div>
       </div>
       <!-- Nationality -->
       <div class="form-group">
         <label for="nationality">Nationality</label>
         <div [ngClass]="{'has-success': form.controls.nationality.valid, 'has-error': form.controls.nationality.dirty && form.controls.nationality.errors && form.controls.nationality.errors?.pattern}">
         <input type="text" name="nationality" class="form-control" placeholder="Enter Nationality"  autocomplete="off" formControlName="nationality">
         <ul class="help-block">
            <li *ngIf="form.controls.nationality.dirty && form.controls.nationality.errors?.required">This field is required.</li>
            <li *ngIf="(form.controls.nationality.dirty && form.controls.nationality.errors?.minlength) || (form.controls.nationality.dirty && form.controls.nationality.errors?.maxlength)">Max length: 14, Min length: 5</li>
           </ul>
          </div>
       </div>
       <div class="form-group">
         <select formControlName="profile">
            <option [ngValue]="null" disabled>Status</option>
            <option *ngFor="let prf of allProfiles" [ngValue]="prf">
               {{ prf.prName }}
            </option>
         </select>
       </div>
       <button [disabled]="processing || !form.valid" type="submit" name="button" class="btn btn-success">Submit</button>
       <button [disabled]="processing" type="submit" name="button" (click)="goBack()" class="btn btn-warning">Go Back</button>
</form>
<div *ngIf="!newPost">
   <div id="accordion" *ngFor="let blog of blogPosts; let i = index;">
      <div class="container" *ngIf = "username === blog.createdBy">
         <div class="card">
            <div class="card-header">
               <a class="card-link" href="#List-{{ i }}"  data-toggle="collapse" href="#collapseOne">
                  {{blog.firstname | uppercase}}
               </a>
               <p class="pull-right">Status</p>
            </div>
            <div id="collapseOne" id="List-{{ i }}"  class="collapse hide" data-parent="#accordion">
               <div class="card-body">
                  <table class="table">
                     <tr class="thead-dark">
                        <td>Email : {{blog.email}}</td>
                        <td>Mobile : {{blog.mobile}}</td>
                     </tr>
                     <tr>
                        <td>Qualification : {{blog.qualification}}</td>
                        <td>Address : {{blog.address}}</td>
                     </tr>
                     <tr>
                        <td>Selected Plan : {{blog.plan}}</td>
                        <td>Course Opted  : {{blog.course}}</td>
                     </tr>
                     <tr>
                        <td>Nationality :{{blog.nationality}}</td>
                        <td>
                           <div class="btn-group dropdown">
                              <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              Status
                              </button>
                              <div class="dropdown-menu">
                                 <a class="dropdown-item" href="#">Started</a>
                                 <a class="dropdown-item" href="#">In Process</a>
                                 <a class="dropdown-item" href="#">Completed</a>
                              </div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td>
                           <input type="file" accept="zip,application/octet-stream,application/zip,application/x-zip,application/x-zip-compressed">
                        </td>
                     </tr>
                  </table>
      <!-- Edit Button -->
      <a [routerLink]="['/edit-blog/', blog._id]" *ngIf="username === blog.createdBy"><button type="button" name="button" class="btn btn-sm btn-info">Edit</button></a>
      <a [routerLink]="['/delete-blog/', blog._id]" *ngIf="username === blog.createdBy"><button type="button" name="button" class="btn btn-sm btn-danger">Delete</button></a>
               </div>
            </div>
      </div>
   </div>
</div>